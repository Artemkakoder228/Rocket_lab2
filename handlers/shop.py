from aiogram import types, Router, F
from aiogram.filters import Command
from database import Database

router = Router()
db = Database()

@router.message(Command("shop"))
@router.message(F.text == "üõí –ú–∞–≥–∞–∑–∏–Ω")
async def shop_index(message: types.Message):
    """
    –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é –º–∞–≥–∞–∑–∏–Ω—É
    """
    # –û—Ç—Ä–∏–º—É—î–º–æ –¥–∞–Ω—ñ —Å—ñ–º'—ó –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (–º–æ–∂–Ω–∞ –±—É–¥–µ –≤–∏–≤–æ–¥–∏—Ç–∏ –±–∞–ª–∞–Ω—Å)
    family_id = db.get_user_family(message.from_user.id)
    
    if not family_id:
        await message.answer("‚ùå –í–∏ –Ω–µ –≤—Ö–æ–¥–∏—Ç–µ –¥–æ —Å–∫–ª–∞–¥—É –∂–æ–¥–Ω–æ—ó —Å—ñ–º'—ó!")
        return

    # –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —Ç–µ, —â–æ —Ñ—É–Ω–∫—Ü—ñ—è –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ
    text = (
        "üõí **–í–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ñ–≥—Ä–æ–≤–∏–π –º–∞–≥–∞–∑–∏–Ω**\n\n"
        "üöß **–î–∞–Ω–∏–π —Ä–æ–∑–¥—ñ–ª –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ.**\n\n"
        "–ù–µ–∑–∞–±–∞—Ä–æ–º —Ç—É—Ç –º–æ–∂–Ω–∞ –±—É–¥–µ –ø—Ä–∏–¥–±–∞—Ç–∏:\n"
        "‚Ä¢ üì¶ –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏ (–†–µ–≥–æ–ª—ñ—Ç, –ö—Ä–µ–º–Ω—ñ–π, –í–æ–¥–µ–Ω—å —Ç–æ—â–æ)\n"
        "‚Ä¢ ‚ö°Ô∏è –ü—Ä–∏—Å–∫–æ—Ä—é–≤–∞—á—ñ –≤–∏–¥–æ–±—É—Ç–∫—É\n"
        "‚Ä¢ üõ° –¢–∏–º—á–∞—Å–æ–≤—ñ —â–∏—Ç–∏ –≤—ñ–¥ —Ä–µ–π–¥—ñ–≤\n"
        "‚Ä¢ üé® –£–Ω—ñ–∫–∞–ª—å–Ω—ñ –≤—ñ–∑—É–∞–ª—å–Ω—ñ –º–æ–¥—É–ª—ñ –¥–ª—è —Ä–∞–∫–µ—Ç–∏\n\n"
        "–°–ª—ñ–¥–∫—É–π—Ç–µ –∑–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º–∏ —Å–∏—Å—Ç–µ–º–∏!"
    )
    
    await message.answer(text, parse_mode="Markdown")

# –Ø–∫—â–æ —É –≤–∞—Å –±—É–ª–∏ —Å—Ç–∞—Ä—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–∫—É–ø–æ–∫, —ó—Ö –º–æ–∂–Ω–∞ –∑–∞–∫–æ–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –∞–±–æ –≤–∏–¥–∞–ª–∏—Ç–∏,
# —â–æ–± –≤–æ–Ω–∏ –Ω–µ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É–≤–∞–ª–∏ –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –ø—Ä–æ —Ä–æ–∑—Ä–æ–±–∫—É.